<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>OptiM Shop v1.0 - Programas Premium Mat√≠as Taibo</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" />
    <!-- SDKs de Pago -->
    <script src="https://www.paypal.com/sdk/js?client-id=YOUR_CLIENT_ID&currency=USD" defer></script>
    <script src="https://sdk.mercadopago.com/js/v2"></script>
    <meta name="theme-color" content="#0f1724">
    <meta name="description" content="Tienda oficial de programas premium y herramientas para Windows. Membres√≠as Plus y Elite con acceso inmediato.">
    <meta name="author" content="Mat√≠as Taibo">
    <style>
        :root {
            --accent1: #ff6b6b;
            --accent2: #feca57;
            --primary-bg: #081421;
            --gradient-dark: linear-gradient(135deg, #081421 0%, #072033 100%);
            --gradient-card: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
            --gradient-premium: linear-gradient(135deg, #1f005c, #5b0060);
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--gradient-dark);
            color: #e6eef8;
            min-height: 100vh;
            line-height: 1.6;
        }
        
        /* Navbar */
        .navbar {
            backdrop-filter: blur(10px);
            background: rgba(15, 23, 42, 0.95);
            border-bottom: 1px solid rgba(255,255,255,0.05);
            padding: 1rem 0;
        }
        
        .navbar-brand {
            font-weight: 800;
            font-size: 1.5rem;
            background: linear-gradient(90deg, var(--accent1), var(--accent2));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        /* Hero Section */
        .hero {
            padding: 100px 20px;
            text-align: center;
            background: var(--gradient-card);
            border-radius: 24px;
            margin: 30px auto;
            width: 95%;
            max-width: 1200px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255,255,255,0.03);
        }
        
        .hero-title {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 1rem;
            background: linear-gradient(90deg, var(--accent1), var(--accent2));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem;
            }
            .hero {
                padding: 60px 15px;
            }
        }
        
        .lead {
            color: var(--accent2);
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto 2rem;
        }
        
        /* Cards */
        .card {
            background: var(--gradient-card);
            border-radius: 16px;
            border: 1px solid rgba(255,255,255,0.03);
            color: #eaf6ff;
            transition: all 0.3s ease;
            overflow: hidden;
            position: relative;
        }
        
        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            border-color: rgba(255,255,255,0.1);
        }
        
        .card-premium {
            border: 2px solid var(--accent2);
            background: linear-gradient(180deg, rgba(254,202,87,0.05), rgba(15,23,42,0.9));
        }
        
        .card-popular {
            position: relative;
            overflow: hidden;
        }
        
        .card-popular::before {
            content: 'M√ÅS POPULAR';
            position: absolute;
            top: 20px;
            right: -35px;
            background: var(--accent1);
            color: white;
            padding: 5px 40px;
            font-size: 0.8rem;
            font-weight: bold;
            transform: rotate(45deg);
        }
        
        /* Buttons */
        .btn-primary {
            background: linear-gradient(90deg, var(--accent1), var(--accent2));
            border: none;
            border-radius: 50px;
            padding: 12px 28px;
            font-weight: 700;
            transition: all 0.3s ease;
            color: #000;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(255,107,107,0.3);
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 50px;
            padding: 10px 25px;
            color: #e6eef8;
            transition: all 0.3s ease;
        }
        
        .btn-outline:hover {
            border-color: var(--accent1);
            background: rgba(255,107,107,0.1);
        }
        
        /* Badges */
        .badge-premium {
            background: linear-gradient(90deg, var(--accent1), var(--accent2));
            color: #000;
            font-weight: bold;
            padding: 8px 16px;
            border-radius: 50px;
        }
        
        .product-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(0,0,0,0.7);
            color: var(--accent2);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: bold;
            backdrop-filter: blur(10px);
        }
        
        /* Pricing */
        .price-tag {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(90deg, var(--accent1), var(--accent2));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 1rem 0;
        }
        
        .price-tag small {
            font-size: 1rem;
            opacity: 0.8;
        }
        
        /* Progress Bar */
        .progress {
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            height: 8px;
            margin: 1rem 0;
        }
        
        .progress-bar {
            background: linear-gradient(90deg, var(--accent1), var(--accent2));
            border-radius: 10px;
        }
        
        /* Stats */
        .stats-card {
            background: rgba(255,255,255,0.02);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.03);
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(90deg, var(--accent1), var(--accent2));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        /* Modal */
        .payment-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            backdrop-filter: blur(10px);
        }
        
        .payment-card {
            background: linear-gradient(180deg, #0f172a, #1e293b);
            border-radius: 20px;
            padding: 30px;
            max-width: 600px;
            width: 100%;
            border: 1px solid rgba(255,255,255,0.05);
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
        }
        
        /* Features List */
        .feature-list {
            list-style: none;
            padding: 0;
        }
        
        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        
        .feature-list li:last-child {
            border-bottom: none;
        }
        
        .feature-list i {
            color: var(--accent2);
            margin-right: 10px;
        }
        
        /* Search */
        .search-container {
            max-width: 800px;
            margin: 2rem auto;
            position: relative;
        }
        
        .search-input {
            background: rgba(255,255,255,0.05);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 50px;
            padding: 15px 25px;
            color: white;
            width: 100%;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--accent1);
            background: rgba(255,255,255,0.08);
        }
        
        /* Cart */
        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--accent1);
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        /* Animation */
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .float-animation {
            animation: float 3s ease-in-out infinite;
        }
        
        /* Utility Classes */
        .text-gradient {
            background: linear-gradient(90deg, var(--accent1), var(--accent2));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .bg-gradient {
            background: linear-gradient(90deg, var(--accent1), var(--accent2));
        }
        
        .border-gradient {
            border: 2px solid;
            border-image: linear-gradient(90deg, var(--accent1), var(--accent2)) 1;
        }
        
        /* Footer */
        .footer {
            background: rgba(0,0,0,0.8);
            padding: 40px 0;
            margin-top: 80px;
            border-top: 1px solid rgba(255,255,255,0.05);
        }
        
        .footer-links a {
            color: rgba(255,255,255,0.7);
            text-decoration: none;
            margin: 0 10px;
            transition: color 0.3s ease;
        }
        
        .footer-links a:hover {
            color: var(--accent2);
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .hero-title {
                font-size: 2.8rem;
            }
            .price-tag {
                font-size: 2rem;
            }
        }
        
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.2rem;
            }
            .btn-primary, .btn-outline {
                width: 100%;
                margin-bottom: 10px;
            }
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.05);
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, var(--accent1), var(--accent2));
            border-radius: 5px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #ff5252, #ffb347);
        }
        
        /* Token Display */
        .token-display {
            background: rgba(0,0,0,0.3);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
            text-align: center;
            letter-spacing: 1px;
            word-break: break-all;
            margin: 20px 0;
        }
        
        /* Security Badge */
        .security-badge {
            display: inline-flex;
            align-items: center;
            background: rgba(76, 175, 80, 0.1);
            border: 1px solid rgba(76, 175, 80, 0.3);
            border-radius: 20px;
            padding: 8px 16px;
            margin: 5px;
        }
        
        .security-badge i {
            color: #4CAF50;
            margin-right: 8px;
        }
        
        /* Loading Spinner */
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255,255,255,0.1);
            border-top: 4px solid var(--accent1);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Alert Styles */
        .alert-premium {
            background: rgba(254,202,87,0.1);
            border: 1px solid rgba(254,202,87,0.3);
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
        }
        
        /* Section Spacing */
        .section-spacing {
            padding: 80px 0;
        }
        
        /* Category Filter */
        .category-filter {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin: 30px 0;
        }
        
        .category-btn {
            background: rgba(255,255,255,0.05);
            border: 2px solid transparent;
            border-radius: 50px;
            padding: 10px 25px;
            color: rgba(255,255,255,0.7);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .category-btn.active {
            background: rgba(255,107,107,0.1);
            border-color: var(--accent1);
            color: white;
        }
        
        .category-btn:hover:not(.active) {
            background: rgba(255,255,255,0.1);
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-bolt me-2"></i>OptiM Shop v1.0
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="#inicio">Inicio</a></li>
                    <li class="nav-item"><a class="nav-link" href="#programas">Programas</a></li>
                    <li class="nav-item"><a class="nav-link" href="#membresias">Membres√≠as</a></li>
                    <li class="nav-item"><a class="nav-link" href="#pagos">Pagos</a></li>
                    <li class="nav-item"><a class="nav-link" href="#faq">FAQ</a></li>
                    <li class="nav-item"><a class="nav-link" href="#contacto">Contacto</a></li>
                    <li class="nav-item ms-2">
                        <button class="btn btn-outline" onclick="toggleCart()">
                            <i class="fas fa-shopping-cart"></i>
                            <span id="cartBadge" class="cart-badge" style="display: none;">0</span>
                        </button>
                    </li>
                    <li class="nav-item ms-2">
                        <button class="btn btn-primary" onclick="window.open('admin-panel.html', '_blank')">
                            <i class="fas fa-user-shield"></i> Admin
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="inicio" class="hero">
        <div class="container">
            <h1 class="hero-title">OptiM Shop v1.0</h1>
            <p class="lead">Tu destino premium para programas optimizados, herramientas exclusivas y membres√≠as que transforman tu experiencia digital.</p>
            
            <div class="row justify-content-center mt-5">
                <div class="col-md-4 mb-4">
                    <div class="stats-card">
                        <div class="stat-number" id="totalUsers">1,250+</div>
                        <div class="small-muted">Usuarios Activos</div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="stats-card">
                        <div class="stat-number" id="totalSales">850+</div>
                        <div class="small-muted">Ventas Completadas</div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="stats-card">
                        <div class="stat-number" id="satisfactionRate">99%</div>
                        <div class="small-muted">Satisfacci√≥n</div>
                    </div>
                </div>
            </div>
            
            <div class="search-container">
                <input type="text" class="search-input" id="searchInput" placeholder="üîç Buscar programas, herramientas o membres√≠as...">
            </div>
            
            <div class="mt-4">
                <div class="security-badge">
                    <i class="fas fa-shield-alt"></i> Pago 100% Seguro
                </div>
                <div class="security-badge">
                    <i class="fas fa-bolt"></i> Entrega Instant√°nea
                </div>
                <div class="security-badge">
                    <i class="fas fa-headset"></i> Soporte 24/7
                </div>
            </div>
        </div>
    </section>

    <!-- Productos Destacados -->
    <section id="programas" class="section-spacing">
        <div class="container">
            <h2 class="text-center mb-5">üéÆ Programas Destacados</h2>
            
            <div class="category-filter">
                <button class="category-btn active" onclick="filterProducts('all')">Todos</button>
                <button class="category-btn" onclick="filterProducts('optimization')">Optimizaci√≥n</button>
                <button class="category-btn" onclick="filterProducts('gaming')">Gaming</button>
                <button class="category-btn" onclick="filterProducts('tools')">Herramientas</button>
                <button class="category-btn" onclick="filterProducts('premium')">Premium</button>
            </div>
            
            <div class="row g-4" id="productsContainer">
                <!-- Los productos se cargan din√°micamente -->
            </div>
        </div>
    </section>

    <!-- Membres√≠as Premium -->
    <section id="membresias" class="section-spacing" style="background: rgba(0,0,0,0.3);">
        <div class="container">
            <h2 class="text-center mb-5">üëë Membres√≠as Premium</h2>
            <p class="text-center mb-5 small-muted">Elige el plan perfecto para tus necesidades. Todos incluyen actualizaciones gratuitas y soporte t√©cnico.</p>
            
            <div class="row">
                <!-- Free Plan -->
                <div class="col-md-4 mb-4">
                    <div class="card h-100 p-4">
                        <div class="text-center mb-4">
                            <h3 class="mb-3">Free</h3>
                            <div class="price-tag">$0</div>
                            <p class="small-muted">Acceso b√°sico para empezar</p>
                        </div>
                        
                        <ul class="feature-list mb-4">
                            <li><i class="fas fa-check text-success"></i> 3 programas b√°sicos</li>
                            <li><i class="fas fa-check text-success"></i> Actualizaciones de seguridad</li>
                            <li><i class="fas fa-check text-success"></i> Comunidad Discord</li>
                            <li><i class="fas fa-times text-muted"></i> Contenido exclusivo</li>
                            <li><i class="fas fa-times text-muted"></i> Soporte prioritario</li>
                            <li><i class="fas fa-times text-muted"></i> Skins premium</li>
                        </ul>
                        
                        <button class="btn btn-outline w-100 mt-auto" onclick="selectPlan('free')">
                            Empezar Gratis
                        </button>
                    </div>
                </div>
                
                <!-- Plus Plan -->
                <div class="col-md-4 mb-4">
                    <div class="card card-popular card-premium h-100 p-4">
                        <div class="text-center mb-4">
                            <h3 class="mb-3">Plus</h3>
                            <div class="price-tag">$9.99<small>/mes</small></div>
                            <p class="small-muted">o $99.99/a√±o (ahorra 16%)</p>
                        </div>
                        
                        <ul class="feature-list mb-4">
                            <li><i class="fas fa-check text-success"></i> 15+ programas premium</li>
                            <li><i class="fas fa-check text-success"></i> Acceso anticipado beta</li>
                            <li><i class="fas fa-check text-success"></i> 10 skins exclusivas</li>
                            <li><i class="fas fa-check text-success"></i> Soporte prioritario 12/7</li>
                            <li><i class="fas fa-check text-success"></i> Cloud saves</li>
                            <li><i class="fas fa-times text-muted"></i> Acceso lifetime</li>
                        </ul>
                        
                        <button class="btn btn-primary w-100 mt-auto" onclick="addToCart('plus-monthly')">
                            <i class="fas fa-crown me-2"></i>Elegir Plus
                        </button>
                        <button class="btn btn-outline w-100 mt-2" onclick="addToCart('plus-yearly')">
                            <i class="fas fa-calendar-alt me-2"></i>Anual (Ahorra 16%)
                        </button>
                    </div>
                </div>
                
                <!-- Elite Plan -->
                <div class="col-md-4 mb-4">
                    <div class="card card-premium h-100 p-4">
                        <div class="text-center mb-4">
                            <h3 class="mb-3">Elite</h3>
                            <div class="price-tag">$19.99<small>/mes</small></div>
                            <p class="small-muted">o $199.99/a√±o (ahorra 16%)</p>
                        </div>
                        
                        <ul class="feature-list mb-4">
                            <li><i class="fas fa-check text-success"></i> Todos los programas</li>
                            <li><i class="fas fa-check text-success"></i> Acceso alpha + betas</li>
                            <li><i class="fas fa-check text-success"></i> Todas las skins (30+)</li>
                            <li><i class="fas fa-check text-success"></i> Soporte VIP 24/7</li>
                            <li><i class="fas fa-check text-success"></i> Acceso lifetime incluido</li>
                            <li><i class="fas fa-check text-success"></i> Servidor privado Discord</li>
                        </ul>
                        
                        <button class="btn btn-primary w-100 mt-auto" onclick="addToCart('elite-monthly')">
                            <i class="fas fa-star me-2"></i>Elegir Elite
                        </button>
                        <button class="btn btn-outline w-100 mt-2" onclick="addToCart('elite-yearly')">
                            <i class="fas fa-gem me-2"></i>Anual (Ahorra 16%)
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="text-center mt-5">
                <div class="alert-premium">
                    <i class="fas fa-info-circle me-2"></i>
                    <strong>Garant√≠a de satisfacci√≥n:</strong> Todos los planes incluyen 30 d√≠as de garant√≠a de devoluci√≥n. Si no est√°s satisfecho, te devolvemos el 100%.
                </div>
            </div>
        </div>
    </section>

    <!-- Payment Methods -->
    <section id="pagos" class="section-spacing">
        <div class="container">
            <h2 class="text-center mb-5">üí≥ M√©todos de Pago</h2>
            
            <div class="row g-4">
                <div class="col-md-6">
                    <div class="card p-4 h-100">
                        <div class="text-center mb-4">
                            <i class="fab fa-paypal fa-4x mb-3" style="color: #003087;"></i>
                            <h4>PayPal</h4>
                            <p class="small-muted">Pago internacional seguro</p>
                        </div>
                        <div class="text-center">
                            <button class="btn btn-primary" onclick="selectPayment('paypal')">
                                <i class="fab fa-paypal me-2"></i>Pagar con PayPal
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="card p-4 h-100">
                        <div class="text-center mb-4">
                            <i class="fas fa-dollar-sign fa-4x mb-3" style="color: #00a1e1;"></i>
                            <h4>MercadoPago</h4>
                            <p class="small-muted">Argentina y Latinoam√©rica</p>
                        </div>
                        <div class="text-center">
                            <button class="btn btn-primary" onclick="selectPayment('mercadopago')">
                                <i class="fas fa-dollar-sign me-2"></i>Pagar con MercadoPago
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row mt-4">
                <div class="col-md-4">
                    <div class="card p-3">
                        <h5><i class="fas fa-university"></i> Transferencia Bancaria</h5>
                        <p class="small-muted">CVU: 0000007900000000000000</p>
                        <p class="small-muted">Alias: grimoire.tokens</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card p-3">
                        <h5><i class="fas fa-coins"></i> Criptomonedas</h5>
                        <p class="small-muted">USDT, Bitcoin, Ethereum</p>
                        <p class="small-muted">Contactar para wallet</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card p-3">
                        <h5><i class="fas fa-credit-card"></i> Tarjetas</h5>
                        <p class="small-muted">Visa, Mastercard, Amex</p>
                        <p class="small-muted">V√≠a PayPal/MercadoPago</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ -->
    <section id="faq" class="section-spacing" style="background: rgba(0,0,0,0.3);">
        <div class="container">
            <h2 class="text-center mb-5">‚ùì Preguntas Frecuentes</h2>
            
            <div class="row">
                <div class="col-md-6 mb-4">
                    <div class="card p-4">
                        <h5>¬øC√≥mo recibo mi token?</h5>
                        <p class="small-muted">El token se env√≠a autom√°ticamente al email que proporcionaste durante el pago. Tambi√©n puedes verlo en la pantalla de confirmaci√≥n.</p>
                    </div>
                </div>
                <div class="col-md-6 mb-4">
                    <div class="card p-4">
                        <h5>¬øPuedo cambiar de plan?</h5>
                        <p class="small-muted">S√≠, puedes cambiar de plan en cualquier momento. La diferencia se prorratea y se aplica a tu pr√≥xima factura.</p>
                    </div>
                </div>
                <div class="col-md-6 mb-4">
                    <div class="card p-4">
                        <h5>¬øHay garant√≠a de devoluci√≥n?</h5>
                        <p class="small-muted">Ofrecemos 30 d√≠as de garant√≠a de satisfacci√≥n. Si no est√°s contento, te devolvemos el 100% de tu dinero.</p>
                    </div>
                </div>
                <div class="col-md-6 mb-4">
                    <div class="card p-4">
                        <h5>¬øQu√© pasa si pierdo mi token?</h5>
                        <p class="small-muted">Contacta a soporte con el email de compra y te reenviaremos tu token. Los tokens tambi√©n se pueden ver desde el panel de usuario.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contacto -->
    <section id="contacto" class="section-spacing">
        <div class="container">
            <h2 class="text-center mb-5">üìû Contacto</h2>
            
            <div class="row">
                <div class="col-md-6 mb-4">
                    <div class="card p-4">
                        <h4 class="mb-4">Informaci√≥n de Contacto</h4>
                        <p><i class="fas fa-envelope me-2"></i> <strong>Email:</strong> matias.taibo2023@gmail.com</p>
                        <p><i class="fas fa-phone me-2"></i> <strong>Tel√©fono:</strong> 3872252758</p>
                        <p><i class="fas fa-clock me-2"></i> <strong>Soporte:</strong> 24/7 para miembros premium</p>
                        <p><i class="fas fa-headset me-2"></i> <strong>Soporte b√°sico:</strong> Lunes a Viernes 9-18</p>
                    </div>
                </div>
                
                <div class="col-md-6 mb-4">
                    <div class="card p-4">
                        <h4 class="mb-4">Panel de Usuario</h4>
                        <p class="small-muted mb-3">Accede a tus tokens, facturas y descargas desde tu panel personal.</p>
                        <div class="input-group mb-3">
                            <input type="text" class="form-control" id="userToken" placeholder="Ingresa tu token">
                            <button class="btn btn-primary" onclick="accessUserPanel()">
                                <i class="fas fa-sign-in-alt"></i>
                            </button>
                        </div>
                        <button class="btn btn-outline w-100" onclick="generateInvoice()">
                            <i class="fas fa-file-invoice me-2"></i>Generar Factura
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-6 mb-4">
                    <h4 class="mb-3"><i class="fas fa-bolt me-2"></i>OptiM Shop</h4>
                    <p class="small-muted">Tu destino premium para programas optimizados y herramientas exclusivas. Creado por Mat√≠as Taibo.</p>
                    <div class="footer-links mt-3">
                        <a href="#"><i class="fab fa-github"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-discord"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                
                <div class="col-md-3 mb-4">
                    <h5 class="mb-3">Enlaces</h5>
                    <div class="footer-links d-flex flex-column">
                        <a href="#programas">Programas</a>
                        <a href="#membresias">Membres√≠as</a>
                        <a href="#pagos">Pagos</a>
                        <a href="#faq">FAQ</a>
                        <a href="#contacto">Contacto</a>
                    </div>
                </div>
                
                <div class="col-md-3 mb-4">
                    <h5 class="mb-3">Legal</h5>
                    <div class="footer-links d-flex flex-column">
                        <a href="#" onclick="showTerms()">T√©rminos</a>
                        <a href="#" onclick="showPrivacy()">Privacidad</a>
                        <a href="#" onclick="showRefund()">Reembolsos</a>
                        <a href="admin-panel.html" target="_blank">Admin</a>
                    </div>
                </div>
            </div>
            
            <div class="text-center mt-4 pt-4 border-top border-secondary">
                <p class="small-muted">¬© 2025 OptiM Shop v1.0 ‚Äî Mat√≠as Taibo. Todos los derechos reservados.</p>
                <p class="small-muted">Este sitio utiliza cookies para mejorar la experiencia. <a href="#" onclick="showCookiePolicy()">M√°s informaci√≥n</a>.</p>
            </div>
        </div>
    </footer>

    <!-- Cart Sidebar -->
    <div id="cartSidebar" class="payment-modal" style="display: none;">
        <div class="payment-card" style="max-width: 400px;">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h4><i class="fas fa-shopping-cart me-2"></i>Carrito</h4>
                <button class="btn btn-sm btn-outline" onclick="toggleCart()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div id="cartItems" style="max-height: 400px; overflow-y: auto;">
                <!-- Cart items loaded here -->
            </div>
            
            <div class="mt-4 pt-4 border-top border-secondary">
                <div class="d-flex justify-content-between mb-2">
                    <span>Subtotal:</span>
                    <span id="cartSubtotal">$0.00</span>
                </div>
                <div class="d-flex justify-content-between mb-2">
                    <span>Descuento:</span>
                    <span id="cartDiscount">$0.00</span>
                </div>
                <div class="d-flex justify-content-between mb-3">
                    <strong>Total:</strong>
                    <strong id="cartTotal">$0.00</strong>
                </div>
                
                <button class="btn btn-primary w-100 mb-2" onclick="checkout()">
                    <i class="fas fa-lock me-2"></i>Proceder al Pago
                </button>
                <button class="btn btn-outline w-100" onclick="clearCart()">
                    <i class="fas fa-trash me-2"></i>Vaciar Carrito
                </button>
            </div>
        </div>
    </div>

    <!-- Payment Modal -->
    <div id="paymentModal" class="payment-modal" style="display: none;">
        <div class="payment-card" id="paymentModalContent">
            <!-- Payment content loaded here -->
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script>
        // Configuraci√≥n inicial
        toastr.options = {
            "closeButton": true,
            "progressBar": true,
            "positionClass": "toast-top-right",
            "timeOut": "5000"
        };

        const CONFIG = {
            adminEmail: "matias.taibo2023@gmail.com",
            adminPhone: "3872252758",
            paypalEmail: "matias.taibo2023@gmail.com",
            cvu: "0000007900000000000000",
            alias: "grimoire.tokens",
            currency: "USD",
            taxRate: 0.21, // IVA 21%
            siteName: "OptiM Shop"
        };

        // Base de datos de productos
        const PRODUCTS = [
            {
                id: 'grimoire-pro',
                name: 'Grimoire Rev Pro',
                description: 'Launcher premium para AQW con m√≥dulos 3D, skins exclusivas y optimizaci√≥n avanzada.',
                price: 24.99,
                category: 'premium',
                type: 'software',
                image: 'üéÆ',
                features: ['50+ skins', 'M√≥dulos 3D', 'Optimizaci√≥n FPS', 'Auto-update', 'Soporte VIP'],
                popular: true
            },
            {
                id: 'swf-ultimate',
                name: 'SWF Decompiler Ultimate',
                description: 'Herramienta profesional para extraer y optimizar archivos Flash con IA.',
                price: 19.99,
                category: 'tools',
                type: 'software',
                image: '‚ö°',
                features: ['Extracci√≥n IA', 'Optimizaci√≥n auto', 'Batch processing', 'Formatos m√∫ltiples'],
                popular: true
            },
            {
                id: 'windows-optimizer',
                name: 'Windows Optimizer Pro',
                description: 'Optimizaci√≥n profunda de Windows con limpieza IA y turbo rendimiento.',
                price: 14.99,
                category: 'optimization',
                type: 'software',
                image: 'üíª',
                features: ['Limpieza IA', 'Turbo mode', 'Registry fix', 'Startup manager'],
                popular: false
            },
            {
                id: 'aqw-booster',
                name: 'AQW Performance Booster',
                description: 'Aumenta el FPS y estabilidad de AdventureQuest Worlds.',
                price: 9.99,
                category: 'gaming',
                type: 'software',
                image: 'üéØ',
                features: ['+60% FPS', 'Reduced lag', 'Auto-optimize', 'Memory clean'],
                popular: true
            },
            {
                id: 'file-organizer',
                name: 'File Organizer AI',
                description: 'Clasificaci√≥n autom√°tica de archivos con inteligencia artificial.',
                price: 12.99,
                category: 'tools',
                type: 'software',
                image: 'üìÅ',
                features: ['Clasificaci√≥n IA', 'Auto-tagging', 'Batch rename', 'Cloud sync'],
                popular: false
            },
            {
                id: 'skin-pack-deluxe',
                name: 'Skin Pack Deluxe',
                description: 'Colecci√≥n de 25 skins premium para Grimoire Rev.',
                price: 29.99,
                category: 'premium',
                type: 'content',
                image: 'üé®',
                features: ['25 skins', 'Efectos 3D', 'Custom themes', 'Animated'],
                popular: true
            },
            {
                id: 'flash-game-optimizer',
                name: 'Flash Game Optimizer',
                description: 'Optimizador para juegos Flash legacy con aceleraci√≥n hardware.',
                price: 7.99,
                category: 'gaming',
                type: 'software',
                image: 'üïπÔ∏è',
                features: ['HW acceleration', 'Save states', 'Cheat engine', 'Multi-instance'],
                popular: false
            },
            {
                id: 'system-monitor',
                name: 'System Monitor Pro',
                description: 'Monitorizaci√≥n avanzada de sistema con alerts y reporting.',
                price: 11.99,
                category: 'optimization',
                type: 'software',
                image: 'üìä',
                features: ['Real-time monitor', 'Alerts system', 'Reports PDF', 'Remote view'],
                popular: false
            }
        ];

        // Membres√≠as
        const PLANS = {
            'free': { name: 'Free', price: 0, duration: 'permanent' },
            'plus-monthly': { name: 'Plus Monthly', price: 9.99, duration: '30 days' },
            'plus-yearly': { name: 'Plus Yearly', price: 99.99, duration: '365 days' },
            'elite-monthly': { name: 'Elite Monthly', price: 19.99, duration: '30 days' },
            'elite-yearly': { name: 'Elite Yearly', price: 199.99, duration: '365 days' }
        };

        // Carrito de compras
        let cart = JSON.parse(localStorage.getItem('optim_cart')) || [];
        let currentOrder = null;

        // Inicializaci√≥n
        document.addEventListener('DOMContentLoaded', function() {
            init();
        });

        function init() {
            renderProducts();
            updateCart();
            loadStats();
            setupSearch();
            
            // Cargar datos iniciales
            if (!localStorage.getItem('optim_first_visit')) {
                localStorage.setItem('optim_first_visit', new Date().toISOString());
                localStorage.setItem('optim_stats', JSON.stringify({
                    total_users: 1250,
                    total_sales: 850,
                    satisfaction: 99
                }));
            }
        }

        function renderProducts(filter = 'all') {
            const container = document.getElementById('productsContainer');
            container.innerHTML = '';
            
            const filteredProducts = filter === 'all' 
                ? PRODUCTS 
                : PRODUCTS.filter(p => p.category === filter);
            
            filteredProducts.forEach(product => {
                const col = document.createElement('div');
                col.className = 'col-md-6 col-lg-3 mb-4';
                col.innerHTML = `
                    <div class="card h-100">
                        <div class="card-body d-flex flex-column">
                            <div class="text-center mb-3">
                                <div style="font-size: 3rem;">${product.image}</div>
                                ${product.popular ? '<span class="product-badge">POPULAR</span>' : ''}
                            </div>
                            <h5 class="card-title">${product.name}</h5>
                            <p class="card-text small-muted flex-grow-1">${product.description}</p>
                            <div class="mb-3">
                                ${product.features.map(f => 
                                    `<span class="badge bg-dark me-1 mb-1">${f}</span>`
                                ).join('')}
                            </div>
                            <div class="mt-auto">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <div class="price-tag" style="font-size: 1.8rem;">$${product.price.toFixed(2)}</div>
                                    <span class="badge bg-secondary">${product.category}</span>
                                </div>
                                <button class="btn btn-primary w-100 mb-2" onclick="addToCart('${product.id}')">
                                    <i class="fas fa-cart-plus me-2"></i>Agregar al Carrito
                                </button>
                                <button class="btn btn-outline w-100" onclick="downloadDemo('${product.id}')">
                                    <i class="fas fa-download me-2"></i>Probar Demo
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                container.appendChild(col);
            });
        }

        function filterProducts(category) {
            // Actualizar botones activos
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            renderProducts(category);
        }

        function addToCart(productId) {
            const product = PRODUCTS.find(p => p.id === productId) || PLANS[productId];
            if (!product) {
                toastr.error('Producto no encontrado');
                return;
            }
            
            cart.push({
                id: productId,
                name: product.name || product.id,
                price: product.price,
                type: product.type || 'membership',
                added: new Date().toISOString(),
                cartId: Date.now() + Math.random().toString(36).substr(2, 9)
            });
            
            updateCart();
            toastr.success(`${product.name || product.id} agregado al carrito`);
            toggleCart();
        }

        function removeFromCart(cartId) {
            cart = cart.filter(item => item.cartId !== cartId);
            updateCart();
            toastr.info('Producto eliminado del carrito');
        }

        function updateCart() {
            localStorage.setItem('optim_cart', JSON.stringify(cart));
            
            const badge = document.getElementById('cartBadge');
            if (cart.length > 0) {
                badge.textContent = cart.length;
                badge.style.display = 'flex';
            } else {
                badge.style.display = 'none';
            }
            
            // Actualizar sidebar del carrito
            if (document.getElementById('cartSidebar').style.display === 'flex') {
                renderCart();
            }
        }

        function renderCart() {
            const container = document.getElementById('cartItems');
            const subtotalEl = document.getElementById('cartSubtotal');
            const discountEl = document.getElementById('cartDiscount');
            const totalEl = document.getElementById('cartTotal');
            
            if (cart.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-5">
                        <div style="font-size: 4rem;">üõí</div>
                        <p class="mt-3">Tu carrito est√° vac√≠o</p>
                        <button class="btn btn-outline mt-3" onclick="toggleCart()">
                            Seguir Comprando
                        </button>
                    </div>
                `;
                subtotalEl.textContent = '$0.00';
                discountEl.textContent = '$0.00';
                totalEl.textContent = '$0.00';
                return;
            }
            
            let html = '';
            let subtotal = 0;
            
            cart.forEach(item => {
                subtotal += item.price;
                html += `
                    <div class="d-flex justify-content-between align-items-center mb-3 p-2 border-bottom border-secondary">
                        <div style="flex: 1;">
                            <div class="fw-bold">${item.name}</div>
                            <div class="small-muted">$${item.price.toFixed(2)}</div>
                        </div>
                        <div>
                            <button class="btn btn-sm btn-outline" onclick="removeFromCart('${item.cartId}')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
            
            // C√°lculo de descuentos (ejemplo: 10% en compras > $50)
            let discount = 0;
            if (subtotal > 50) {
                discount = subtotal * 0.10;
            }
            
            const total = subtotal - discount;
            
            subtotalEl.textContent = `$${subtotal.toFixed(2)}`;
            discountEl.textContent = `-$${discount.toFixed(2)}`;
            totalEl.textContent = `$${total.toFixed(2)}`;
        }

        function toggleCart() {
            const sidebar = document.getElementById('cartSidebar');
            if (sidebar.style.display === 'flex') {
                sidebar.style.display = 'none';
            } else {
                sidebar.style.display = 'flex';
                renderCart();
            }
        }

        function clearCart() {
            if (cart.length === 0) return;
            
            if (confirm('¬øEst√°s seguro de vaciar el carrito?')) {
                cart = [];
                updateCart();
                toastr.info('Carrito vaciado');
                toggleCart();
            }
        }

        function checkout() {
            if (cart.length === 0) {
                toastr.warning('Agrega productos al carrito primero');
                return;
            }
            
            const modal = document.getElementById('paymentModal');
            const content = document.getElementById('paymentModalContent');
            
            let subtotal = cart.reduce((sum, item) => sum + item.price, 0);
            let discount = subtotal > 50 ? subtotal * 0.10 : 0;
            let total = subtotal - discount;
            
            content.innerHTML = `
                <div class="text-center mb-4">
                    <h4><i class="fas fa-lock me-2"></i>Finalizar Compra</h4>
                    <p class="small-muted">Paso 1 de 3 - Informaci√≥n de contacto</p>
                </div>
                
                <div class="mb-4">
                    <label class="form-label">Email</label>
                    <input type="email" id="checkoutEmail" class="form-control" placeholder="tu@email.com" required>
                </div>
                
                <div class="mb-4">
                    <label class="form-label">Nombre completo</label>
                    <input type="text" id="checkoutName" class="form-control" placeholder="Tu nombre completo">
                </div>
                
                <div class="mb-4">
                    <label class="form-label">Pa√≠s</label>
                    <select id="checkoutCountry" class="form-control">
                        <option value="AR">Argentina</option>
                        <option value="US">Estados Unidos</option>
                        <option value="ES">Espa√±a</option>
                        <option value="MX">M√©xico</option>
                        <option value="CL">Chile</option>
                        <option value="CO">Colombia</option>
                        <option value="other">Otro</option>
                    </select>
                </div>
                
                <div class="alert alert-dark mb-4">
                    <i class="fas fa-info-circle me-2"></i>
                    El token ser√° enviado a este email. Verifica que sea correcto.
                </div>
                
                <div class="d-flex justify-content-between">
                    <button class="btn btn-outline" onclick="closePaymentModal()">
                        Cancelar
                    </button>
                    <button class="btn btn-primary" onclick="showPaymentMethods()">
                        Continuar <i class="fas fa-arrow-right ms-2"></i>
                    </button>
                </div>
            `;
            
            currentOrder = {
                id: 'ORD-' + Date.now() + '-' + Math.random().toString(36).substr(2, 6).toUpperCase(),
                items: [...cart],
                subtotal: subtotal,
                discount: discount,
                total: total,
                date: new Date().toISOString()
            };
            
            modal.style.display = 'flex';
        }

        function showPaymentMethods() {
            const email = document.getElementById('checkoutEmail').value;
            const name = document.getElementById('checkoutName').value;
            const country = document.getElementById('checkoutCountry').value;
            
            if (!email) {
                toastr.error('Ingresa tu email');
                return;
            }
            
            currentOrder.email = email;
            currentOrder.name = name;
            currentOrder.country = country;
            
            const content = document.getElementById('paymentModalContent');
            
            content.innerHTML = `
                <div class="text-center mb-4">
                    <h4><i class="fas fa-credit-card me-2"></i>M√©todo de Pago</h4>
                    <p class="small-muted">Paso 2 de 3 - Elige c√≥mo pagar</p>
                </div>
                
                <div class="row g-3 mb-4">
                    <div class="col-md-6">
                        <div class="card p-3 text-center payment-option" onclick="selectPaymentOption('paypal')">
                            <i class="fab fa-paypal fa-3x mb-3" style="color: #003087;"></i>
                            <h5>PayPal</h5>
                            <p class="small-muted">Pago internacional</p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card p-3 text-center payment-option" onclick="selectPaymentOption('mercadopago')">
                            <i class="fas fa-dollar-sign fa-3x mb-3" style="color: #00a1e1;"></i>
                            <h5>MercadoPago</h5>
                            <p class="small-muted">Argentina/Latam</p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card p-3 text-center payment-option" onclick="selectPaymentOption('transfer')">
                            <i class="fas fa-university fa-3x mb-3"></i>
                            <h5>Transferencia</h5>
                            <p class="small-muted">Bancaria/Crypto</p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card p-3 text-center payment-option" onclick="selectPaymentOption('crypto')">
                            <i class="fas fa-coins fa-3x mb-3" style="color: #f7931a;"></i>
                            <h5>Cripto</h5>
                            <p class="small-muted">USDT/BTC/ETH</p>
                        </div>
                    </div>
                </div>
                
                <div class="d-flex justify-content-between">
                    <button class="btn btn-outline" onclick="checkout()">
                        <i class="fas fa-arrow-left me-2"></i>Volver
                    </button>
                </div>
            `;
        }

        function selectPaymentOption(method) {
            currentOrder.paymentMethod = method;
            showPaymentConfirmation();
        }

        function showPaymentConfirmation() {
            const content = document.getElementById('paymentModalContent');
            
            content.innerHTML = `
                <div class="text-center mb-4">
                    <h4><i class="fas fa-check-circle me-2 text-success"></i>Confirmar Pago</h4>
                    <p class="small-muted">Paso 3 de 3 - Revisa y confirma</p>
                </div>
                
                <div class="mb-4">
                    <h6>Resumen del pedido:</h6>
                    <div class="bg-dark p-3 rounded">
                        ${currentOrder.items.map(item => `
                            <div class="d-flex justify-content-between mb-2">
                                <span>${item.name}</span>
                                <span>$${item.price.toFixed(2)}</span>
                            </div>
                        `).join('')}
                        
                        <div class="d-flex justify-content-between mt-3 pt-3 border-top">
                            <strong>Total:</strong>
                            <strong class="text-gradient">$${currentOrder.total.toFixed(2)}</strong>
                        </div>
                    </div>
                </div>
                
                <div class="mb-4">
                    <h6>Informaci√≥n:</h6>
                    <div class="small-muted">
                        <div>Email: ${currentOrder.email}</div>
                        <div>M√©todo: ${currentOrder.paymentMethod}</div>
                        <div>Orden: ${currentOrder.id}</div>
                    </div>
                </div>
                
                <div class="form-check mb-4">
                    <input class="form-check-input" type="checkbox" id="termsCheck">
                    <label class="form-check-label small-muted" for="termsCheck">
                        Acepto los <a href="#" onclick="showTerms()">t√©rminos y condiciones</a>
                    </label>
                </div>
                
                <div class="d-grid gap-2">
                    <button class="btn btn-primary" onclick="processPayment()" id="processPaymentBtn">
                        <i class="fas fa-lock me-2"></i>Confirmar y Pagar
                    </button>
                    <button class="btn btn-outline" onclick="showPaymentMethods()">
                        Cambiar M√©todo
                    </button>
                </div>
            `;
        }

        function processPayment() {
            const termsChecked = document.getElementById('termsCheck');
            if (!termsChecked || !termsChecked.checked) {
                toastr.error('Debes aceptar los t√©rminos y condiciones');
                return;
            }
            
            const btn = document.getElementById('processPaymentBtn');
            btn.innerHTML = '<div class="spinner-border spinner-border-sm me-2"></div> Procesando...';
            btn.disabled = true;
            
            // Simular procesamiento de pago
            setTimeout(() => {
                completeOrder();
            }, 2000);
        }

        function completeOrder() {
            // Generar token
            const token = generateToken();
            
            // Guardar orden
            const orders = JSON.parse(localStorage.getItem('optim_orders')) || [];
            currentOrder.status = 'completed';
            currentOrder.token = token;
            currentOrder.completedAt = new Date().toISOString();
            orders.push(currentOrder);
            localStorage.setItem('optim_orders', JSON.stringify(orders));
            
            // Guardar token
            const tokens = JSON.parse(localStorage.getItem('optim_tokens')) || [];
            tokens.push({
                token: token,
                email: currentOrder.email,
                orderId: currentOrder.id,
                date: new Date().toISOString(),
                expires: new Date(Date.now() + 365 * 24 * 60 * 60 * 1000).toISOString()
            });
            localStorage.setItem('optim_tokens', JSON.stringify(tokens));
            
            // Limpiar carrito
            cart = [];
            updateCart();
            
            // Mostrar confirmaci√≥n
            const content = document.getElementById('paymentModalContent');
            content.innerHTML = `
                <div class="text-center">
                    <div class="success-check mb-4">
                        <i class="fas fa-check-circle fa-4x text-success"></i>
                    </div>
                    
                    <h4 class="mb-3">¬°Pago Exitoso!</h4>
                    <p class="small-muted mb-4">Tu pedido ha sido procesado correctamente.</p>
                    
                    <div class="alert alert-dark mb-4">
                        <i class="fas fa-receipt me-2"></i>
                        <strong>Orden #:</strong> ${currentOrder.id}
                    </div>
                    
                    <div class="token-display mb-4">
                        ${token}
                    </div>
                    
                    <div class="alert alert-success mb-4">
                        <i class="fas fa-envelope me-2"></i>
                        El token ha sido enviado a: <strong>${currentOrder.email}</strong>
                    </div>
                    
                    <div class="d-grid gap-2 mb-3">
                        <button class="btn btn-primary" onclick="downloadInvoice('${currentOrder.id}')">
                            <i class="fas fa-file-invoice me-2"></i>Descargar Factura
                        </button>
                        <button class="btn btn-outline" onclick="activateToken('${token}')">
                            <i class="fas fa-rocket me-2"></i>Activar Token
                        </button>
                    </div>
                    
                    <button class="btn btn-outline w-100" onclick="closePaymentModal()">
                        Cerrar
                    </button>
                </div>
            `;
            
            // Enviar email (simulaci√≥n)
            sendConfirmationEmail(currentOrder.email, token, currentOrder.id);
            
            toastr.success('¬°Compra completada exitosamente!');
        }

        function generateToken() {
            const prefix = currentOrder.items.some(i => i.id.includes('elite')) ? 'OPTIM-ELITE' : 'OPTIM-PLUS';
            const random = Math.random().toString(36).substr(2, 8).toUpperCase();
            const timestamp = Date.now().toString(36).substr(-4).toUpperCase();
            return `${prefix}-${random}-${timestamp}`;
        }

        function sendConfirmationEmail(email, token, orderId) {
            // En producci√≥n, aqu√≠ se integrar√≠a con un servicio de email como SendGrid, Mailchimp, etc.
            console.log(`Email enviado a ${email}: Token ${token} para orden ${orderId}`);
            
            // Simulaci√≥n de Shopify Email
            const emailData = {
                to: email,
                subject: `Confirmaci√≥n de compra - Orden #${orderId}`,
                body: `
                    <h1>¬°Gracias por tu compra en OptiM Shop!</h1>
                    <p>Tu pedido #${orderId} ha sido procesado exitosamente.</p>
                    <p><strong>Token de activaci√≥n:</strong> ${token}</p>
                    <p>Guarda este token en un lugar seguro. Lo necesitar√°s para activar tus productos.</p>
                    <p>Para descargar tu factura, visita: <a href="#" onclick="downloadInvoice('${orderId}')">Generar Factura</a></p>
                    <p>Si tienes preguntas, cont√°ctanos a ${CONFIG.adminEmail}</p>
                    <br>
                    <p>Saludos,<br>Equipo OptiM Shop</p>
                `
            };
            
            // Guardar email para historial
            const emails = JSON.parse(localStorage.getItem('optim_emails')) || [];
            emails.push({
                ...emailData,
                sent: new Date().toISOString(),
                status: 'sent'
            });
            localStorage.setItem('optim_emails', JSON.stringify(emails));
        }

        function downloadInvoice(orderId) {
            const orders = JSON.parse(localStorage.getItem('optim_orders')) || [];
            const order = orders.find(o => o.id === orderId);
            
            if (!order) {
                toastr.error('Orden no encontrada');
                return;
            }
            
            // Generar factura en HTML
            const invoiceHTML = `
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Factura ${order.id} - OptiM Shop</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 40px; }
                        .invoice { max-width: 800px; margin: 0 auto; }
                        .header { text-align: center; margin-bottom: 40px; }
                        .details { margin: 30px 0; }
                        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
                        th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }
                        th { background: #f5f5f5; }
                        .total { font-weight: bold; font-size: 1.2em; }
                        .footer { margin-top: 50px; text-align: center; color: #666; }
                    </style>
                </head>
                <body>
                    <div class="invoice">
                        <div class="header">
                            <h1>OptiM Shop</h1>
                            <h2>Factura #${order.id}</h2>
                            <p>Fecha: ${new Date(order.date).toLocaleDateString('es-ES')}</p>
                        </div>
                        
                        <div class="details">
                            <p><strong>Cliente:</strong> ${order.name || 'No especificado'}</p>
                            <p><strong>Email:</strong> ${order.email}</p>
                            <p><strong>M√©todo de pago:</strong> ${order.paymentMethod}</p>
                        </div>
                        
                        <table>
                            <thead>
                                <tr>
                                    <th>Producto</th>
                                    <th>Precio</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${order.items.map(item => `
                                    <tr>
                                        <td>${item.name}</td>
                                        <td>$${item.price.toFixed(2)}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                            <tfoot>
                                <tr>
                                    <td><strong>Subtotal</strong></td>
                                    <td>$${order.subtotal.toFixed(2)}</td>
                                </tr>
                                <tr>
                                    <td><strong>Descuento</strong></td>
                                    <td>-$${order.discount.toFixed(2)}</td>
                                </tr>
                                <tr class="total">
                                    <td><strong>Total</strong></td>
                                    <td>$${order.total.toFixed(2)}</td>
                                </tr>
                            </tfoot>
                        </table>
                        
                        <div class="footer">
                            <p>Gracias por tu compra en OptiM Shop</p>
                            <p>Contacto: ${CONFIG.adminEmail} | ${CONFIG.adminPhone}</p>
                            <p>Esta factura es v√°lida como comprobante de pago.</p>
                        </div>
                    </div>
                </body>
                </html>
            `;
            
            // Crear y descargar archivo
            const blob = new Blob([invoiceHTML], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `factura-${order.id}.html`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            toastr.success('Factura descargada');
        }

        function downloadDemo(productId) {
            const product = PRODUCTS.find(p => p.id === productId);
            if (!product) return;
            
            // Generar factura para demo (gratis)
            const demoInvoice = `
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Demo - ${product.name}</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 40px; text-align: center; }
                        .demo { max-width: 600px; margin: 0 auto; }
                        .download-btn { 
                            background: linear-gradient(90deg, #ff6b6b, #feca57);
                            color: black;
                            padding: 15px 30px;
                            border-radius: 50px;
                            text-decoration: none;
                            display: inline-block;
                            margin: 20px 0;
                            font-weight: bold;
                        }
                    </style>
                </head>
                <body>
                    <div class="demo">
                        <h1>Versi√≥n Demo - ${product.name}</h1>
                        <p>Esta es una versi√≥n de demostraci√≥n con funciones limitadas.</p>
                        <p>Para desbloquear todas las funciones, adquiere la versi√≥n completa.</p>
                        
                        <a href="#" class="download-btn" onclick="alert('Descarga simulada - En producci√≥n aqu√≠ ir√≠a el link real')">
                            <i class="fas fa-download"></i> Descargar Demo
                        </a>
                        
                        <div style="margin-top: 40px; text-align: left;">
                            <h3>Funciones incluidas en demo:</h3>
                            <ul>
                                ${product.features.slice(0, 2).map(f => `<li>${f} (limitado)</li>`).join('')}
                                <li>Uso por 30 d√≠as</li>
                                <li>Soporte b√°sico</li>
                            </ul>
                            
                            <h3>Funciones exclusivas de versi√≥n completa:</h3>
                            <ul>
                                ${product.features.map(f => `<li>${f} (completo)</li>`).join('')}
                                <li>Actualizaciones gratis</li>
                                <li>Soporte premium</li>
                            </ul>
                        </div>
                        
                        <div style="margin-top: 40px;">
                            <button onclick="window.close()">Cerrar</button>
                        </div>
                    </div>
                </body>
                </html>
            `;
            
            // Abrir demo en nueva ventana
            const demoWindow = window.open('', '_blank');
            demoWindow.document.write(demoInvoice);
            
            // Registrar descarga demo
            const demos = JSON.parse(localStorage.getItem('optim_demos')) || [];
            demos.push({
                product: product.name,
                date: new Date().toISOString(),
                email: 'anonymous'
            });
            localStorage.setItem('optim_demos', JSON.stringify(demos));
            
            toastr.info('Demo abierta en nueva ventana');
        }

        function generateInvoice() {
            // Abrir generador de facturas
            window.open('invoice.html', '_blank', 'width=800,height=600');
        }

        function accessUserPanel() {
            const token = document.getElementById('userToken').value;
            if (!token) {
                toastr.warning('Ingresa un token');
                return;
            }
            
            const tokens = JSON.parse(localStorage.getItem('optim_tokens')) || [];
            const tokenData = tokens.find(t => t.token === token);
            
            if (tokenData) {
                // Abrir panel de usuario
                const userPanel = `
                    <html>
                    <head>
                        <title>Panel de Usuario - OptiM Shop</title>
                        <style>
                            body { font-family: Arial, sans-serif; margin: 20px; }
                            .panel { max-width: 800px; margin: 0 auto; }
                            .token { font-family: monospace; background: #f5f5f5; padding: 10px; border-radius: 5px; }
                        </style>
                    </head>
                    <body>
                        <div class="panel">
                            <h1>Panel de Usuario</h1>
                            <p><strong>Token:</strong> <span class="token">${token}</span></p>
                            <p><strong>Fecha de activaci√≥n:</strong> ${new Date(tokenData.date).toLocaleDateString()}</p>
                            <p><strong>V√°lido hasta:</strong> ${new Date(tokenData.expires).toLocaleDateString()}</p>
                            
                            <h2>Productos activados:</h2>
                            <ul>
                                <li>Grimoire Rev Pro</li>
                                <li>Windows Optimizer Pro</li>
                                <li>Todas las skins premium</li>
                            </ul>
                            
                            <h2>Descargas:</h2>
                            <button onclick="alert('Descarga iniciada')">Descargar Grimoire Rev Pro</button>
                            <button onclick="alert('Descarga iniciada')">Descargar Windows Optimizer</button>
                            
                            <h2>Facturas:</h2>
                            <button onclick="downloadInvoice('${tokenData.orderId}')">Descargar Factura</button>
                        </div>
                    </body>
                    </html>
                `;
                
                const userWindow = window.open('', '_blank');
                userWindow.document.write(userPanel);
            } else {
                toastr.error('Token inv√°lido');
            }
        }

        function closePaymentModal() {
            document.getElementById('paymentModal').style.display = 'none';
            currentOrder = null;
        }

        function selectPlan(planId) {
            if (planId === 'free') {
                window.location.href = '#programas';
                toastr.info('Puedes descargar los programas b√°sicos gratuitamente');
            } else {
                addToCart(planId);
            }
        }

        function selectPayment(method) {
            toastr.info(`Redirigiendo a ${method}...`);
            // En producci√≥n aqu√≠ ir√≠a la integraci√≥n real
        }

        function loadStats() {
            const stats = JSON.parse(localStorage.getItem('optim_stats')) || {
                total_users: 1250,
                total_sales: 850,
                satisfaction: 99
            };
            
            document.getElementById('totalUsers').textContent = stats.total_users + '+';
            document.getElementById('totalSales').textContent = stats.total_sales + '+';
            document.getElementById('satisfactionRate').textContent = stats.satisfaction + '%';
        }

        function setupSearch() {
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('input', function(e) {
                const query = e.target.value.toLowerCase();
                const products = document.querySelectorAll('#productsContainer .col-md-6');
                
                products.forEach(product => {
                    const text = product.textContent.toLowerCase();
                    product.style.display = text.includes(query) ? 'block' : 'none';
                });
            });
        }

        function showTerms() {
            alert('T√©rminos y condiciones:\n\n1. Los tokens son personales e intransferibles.\n2. Garant√≠a de 30 d√≠as en todos los productos.\n3. Soporte disponible seg√∫n plan contratado.\n4. Precios sujetos a cambio sin previo aviso.\n5. El uso indebido puede resultar en revocaci√≥n del token.');
        }

        function showPrivacy() {
            alert('Pol√≠tica de privacidad:\n\n1. Solo recopilamos informaci√≥n necesaria para el servicio.\n2. No compartimos datos con terceros.\n3. Los pagos se procesan de forma segura.\n4. Puedes solicitar eliminaci√≥n de datos en cualquier momento.');
        }

        function showRefund() {
            alert('Pol√≠tica de reembolsos:\n\n1. 30 d√≠as de garant√≠a en todos los productos.\n2. Reembolso 100% si no est√°s satisfecho.\n3. Proceso simple: email a matias.taibo2023@gmail.com\n4. Reembolso en 7-10 d√≠as h√°biles.');
        }

        function showCookiePolicy() {
            alert('Pol√≠tica de cookies:\n\nUsamos cookies para:\n1. Recordar tu carrito de compras\n2. Mejorar la experiencia de usuario\n3. Analizar tr√°fico del sitio\n\nPuedes desactivarlas en configuraci√≥n del navegador.');
        }

        function activateToken(token) {
            localStorage.setItem('optim_active_token', token);
            toastr.success('Token activado correctamente');
            closePaymentModal();
            
            // Mostrar secci√≥n premium
            document.getElementById('premiumContent').style.display = 'block';
            document.getElementById('currentToken').textContent = token;
        }

        // Exportar funciones globalmente
        window.addToCart = addToCart;
        window.removeFromCart = removeFromCart;
        window.toggleCart = toggleCart;
        window.clearCart = clearCart;
        window.checkout = checkout;
        window.selectPaymentOption = selectPaymentOption;
        window.processPayment = processPayment;
        window.closePaymentModal = closePaymentModal;
        window.downloadInvoice = downloadInvoice;
        window.downloadDemo = downloadDemo;
        window.generateInvoice = generateInvoice;
        window.accessUserPanel = accessUserPanel;
        window.selectPlan = selectPlan;
        window.selectPayment = selectPayment;
        window.showTerms = showTerms;
        window.showPrivacy = showPrivacy;
        window.showRefund = showRefund;
        window.showCookiePolicy = showCookiePolicy;
        window.activateToken = activateToken;
        window.filterProducts = filterProducts;
    </script>
</body>
</html>



