<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OptiM v1 Beta - Programas y Launcher AQW (Grimoire Rev) | MatÃ­as Taibo</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
<meta name="theme-color" content="#0f1724">
<style>
:root{--accent1:#ff6b6b;--accent2:#feca57}
*{box-sizing:border-box}
body{font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;margin:0;background:linear-gradient(135deg,#081421 0%,#072033 100%);color:#e6eef8;min-height:100vh}
.navbar{backdrop-filter:blur(8px);background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent)}
.brand{font-weight:800}
.hero{padding:80px 20px;text-align:center;background:linear-gradient(135deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:18px;margin:24px auto;width:92%;box-shadow:0 20px 60px rgba(2,6,23,0.6)}
.lead{color:var(--accent2)}
.search-container{max-width:820px;margin:20px auto}
.section-title{font-size:1.8rem;margin-bottom:18px}
.card{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:12px;border:1px solid rgba(255,255,255,0.03);color:#eaf6ff}
.btn-primary{background:linear-gradient(90deg,var(--accent1),var(--accent2));border:none;border-radius:999px;padding:10px 20px;font-weight:700}
.btn-outline{background:transparent;border:1px solid rgba(255,255,255,0.06);border-radius:999px}
.launcher{background:linear-gradient(135deg,#1f005c,#5b0060);padding:24px;border-radius:12px;margin-top:22px}
.pulse{animation:pulse 2.2s infinite}
@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.02)}100%{transform:scale(1)}}
.footer{background:linear-gradient(180deg,rgba(0,0,0,0.6),rgba(0,0,0,0.9));padding:30px;text-align:center;margin-top:40px}
.glass-card{background:rgba(255,255,255,0.02);padding:16px;border-radius:12px}
.login-card{width:480px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(0,0,0,0.15));padding:20px;border-radius:12px}
.muted{color:rgba(255,255,255,0.65)}
.small-muted{color:rgba(255,255,255,0.5);font-size:0.9rem}
@media (max-width:768px){.hero{padding:40px 12px}.login-card{width:100%}}
</style>
</head>
<body>

<!-- NAV -->
<nav class="navbar navbar-expand-lg navbar-dark px-4">
  <div class="container-fluid">
    <a class="navbar-brand brand text-light"><i class="fas fa-bolt"></i> OptiM</a>
    <div class="d-flex gap-2">
      <button class="btn btn-outline text-light" id="openAdminBtn"><i class="fas fa-tools"></i> Admin</button>
      <button class="btn btn-outline text-light" id="openMemberBtn"><i class="fas fa-crown"></i> MembresÃ­a</button>
      <a class="btn btn-outline text-light" href="#contacto-info"><i class="fas fa-envelope"></i> Contacto</a>
    </div>
  </div>
</nav>

<!-- HERO -->
<section class="hero container">
  <h1 class="display-5">OptiM â€” v1 Beta <small class="small-muted">(2025) â€” Creado por MatÃ­as Taibo</small></h1>
  <p class="lead">Tu hub de utilidades para Windows: optimizadores, herramientas y el launcher <strong>Grimoire Rev</strong> (para AQW). Sitio & sistema listo para aceptar pagos y emitir tokens.</p>
  <div class="search-container">
    <input id="searchInput" class="form-control form-control-lg" placeholder="Buscar programas, apps o funciones..." aria-label="Buscar programas">
  </div>
  <div class="d-flex justify-content-center gap-3 mt-3">
    <a class="btn btn-primary" id="ctaLauncher"><i class="fas fa-magic"></i> Abrir Grimoire Rev</a>
    <a class="btn btn-outline text-light" id="ctaExplore"><i class="fas fa-compass"></i> Explorar Apps</a>
  </div>
</section>

<!-- LAUNCHER -->
<div class="container mt-4">
  <div class="launcher d-flex flex-column align-items-center text-light">
    <h3><i class="fas fa-rocket"></i> Grimoire Rev â€” Launcher (AQW)</h3>
    <p class="small-muted">Launcher dedicado para mejorar la experiencia de AQW: mÃ³dulos de optimizaciÃ³n, skins y arranque rÃ¡pido. (Integrado en OptiM).</p>
    <div class="d-flex gap-2 flex-wrap justify-content-center mt-3">
      <button class="btn btn-primary" id="openLauncherUI"><i class="fas fa-desktop"></i> Abrir Launcher</button>
      <button class="btn btn-outline text-light" id="openSettings"><i class="fas fa-sliders-h"></i> Ajustes</button>
    </div>
  </div>
</div>

<!-- PROGRAMAS GRID -->
<section class="container py-5" id="programas">
  <h2 class="section-title">Programas & Apps</h2>
  <div class="row g-4" id="programasContainer"></div>
</section>

<!-- APPS FUTURAS -->
<section class="container py-3">
  <h2 class="section-title">Apps Futuras</h2>
  <div class="row g-4">
    <div class="col-md-4"><div class="card p-3"><h5><i class="fas fa-headphones"></i> Reproductor de MÃºsica Ultra</h5><p class="muted">Ecualizador, playlists IA y visualizadores WebGL.</p></div></div>
    <div class="col-md-4"><div class="card p-3"><h5><i class="fas fa-share-alt"></i> NeoConnect (Red Social)</h5><p class="muted">Feed inteligente y mensajes.</p></div></div>
    <div class="col-md-4"><div class="card p-3"><h5><i class="fas fa-toolbox"></i> Toolkit Universal</h5><p class="muted">Editor, capturador, gestor de procesos y optimizadores.</p></div></div>
  </div>
</section>

<!-- MEMBERSHIP & PAYMENTS -->
<section class="container py-5" id="membresiaSection">
  <h2 class="section-title">MembresÃ­a â€” OptiM Access</h2>
  <div class="row">
    <div class="col-md-6">
      <div class="glass-card">
        <h4>Planes</h4>
        <div class="mt-3">
          <div class="d-flex justify-content-between align-items-center mb-2"><div><strong>Free</strong><div class="small-muted">Acceso bÃ¡sico</div></div><button class="btn btn-outline text-light" onclick="seleccionarPlan('free')">Seleccionar</button></div>
          <div class="d-flex justify-content-between align-items-center mb-2"><div><strong>Plus</strong><div class="small-muted">Contenido beta + skins</div></div><button class="btn btn-primary" onclick="seleccionarPlan('plus')">Suscribirme</button></div>
          <div class="d-flex justify-content-between align-items-center"><div><strong>Elite</strong><div class="small-muted">Acceso completo + soporte</div></div><button class="btn btn-primary" onclick="seleccionarPlan('elite')">Suscribirme</button></div>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="glass-card">
        <h4>MÃ©todos de Pago</h4>
        <p class="small-muted">SeleccionÃ¡ uno y seguÃ­ la instrucciÃ³n. Tras confirmar el pago, subÃ­ el comprobante para generar tu token.</p>
        <div class="d-grid gap-2">
          <button class="btn btn-primary" onclick="startPayment('paypal')"><i class="fab fa-paypal"></i> Pagar con PayPal</button>
          <button class="btn btn-primary" onclick="startPayment('mercadopago')"><i class="fas fa-dollar-sign"></i> Pagar con Mercado Pago</button>
          <button class="btn btn-outline" onclick="startPayment('brubank')">Brubank (transferencia) â€” Alias: <strong>grimoire.tokens</strong></button>
          <button class="btn btn-outline" onclick="startPayment('lemon')">Lemon Cash (crypto) â€” Contactar para wallet</button>
        </div>
        <div class="mt-3">
          <label class="small-muted">Â¿Ya pagaste? SubÃ­ el comprobante:</label>
          <input id="receiptInput" type="file" class="form-control mb-2" accept="image/*,application/pdf" />
          <button class="btn btn-primary" onclick="uploadReceipt()">Subir comprobante y solicitar token</button>
          <p id="paymentMsg" class="small-muted mt-2"></p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- PREMIUM CONTENT -->
<section class="container py-4" id="premiumContent" style="display:none">
  <h3 class="section-title">Contenido Exclusivo</h3>
  <div class="row"><div class="col-md-4"><div class="card p-3"> <h5>Grimoire Rev Pro</h5><p class="muted">MÃ³dulos 3D y skins exclusivos.</p></div></div><div class="col-md-4"><div class="card p-3"> <h5>Acceso Anticipado</h5><p class="muted">Prueba apps alpha y betas.</p></div></div><div class="col-md-4"><div class="card p-3"> <h5>Experiencias Interactivas</h5><p class="muted">Mini apps WebGL y visualizaciones premium.</p></div></div></div>
</section>

<!-- ADMIN PANEL (full frontend demo) -->
<div id="adminPanel" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.6);z-index:9999;align-items:center;justify-content:center;padding:20px">
  <div class="login-card p-4">
    <div class="d-flex justify-content-between align-items-center mb-3"><h4>Panel Admin â€” OptiM</h4><small class="small-muted">Demo frontend</small></div>
    <div id="adminLoginArea">
      <input id="adminPass" class="form-control mb-2" placeholder="ContraseÃ±a admin" />
      <div class="d-flex gap-2 mb-3"><button class="btn btn-primary" onclick="loginAdmin()">Ingresar</button><button class="btn btn-outline" onclick="closeAdmin()">Cerrar</button></div>
    </div>

    <div id="adminActions" style="display:none">
      <h6>Generador de Tokens</h6>
      <div class="d-flex gap-2 mb-2"><input id="newTokenInput" class="form-control" placeholder="Etiqueta (ej: OPTIM-ELITE-2025)"/><button class="btn btn-primary" onclick="generarToken()">Generar</button></div>
      <small class="small-muted">Tokens guardados en local (demo). Recomendado: backend para producciÃ³n.</small>
      <pre id="tokensList" style="max-height:120px;overflow:auto;background:rgba(0,0,0,0.15);padding:10px;border-radius:8px;margin-top:8px"></pre>

      <hr />
      <h6>Usuarios Premium (simulado)</h6>
      <div id="usersList" style="max-height:140px;overflow:auto;background:rgba(0,0,0,0.05);padding:10px;border-radius:8px"></div>
      <div class="d-flex gap-2 mt-2"><button class="btn btn-outline" onclick="exportUsers()">Exportar CSV</button><button class="btn btn-outline" onclick="clearUsers()">Limpiar</button></div>

      <hr />
      <h6>Pagos</h6>
      <div class="small-muted mb-2">Ver comprobantes subidos y marcar como aceptados.</div>
      <div id="paymentsList" style="max-height:120px;overflow:auto;background:rgba(0,0,0,0.05);padding:8px;border-radius:8px"></div>

      <div class="d-flex gap-2 mt-3"><button class="btn btn-outline" onclick="exportTokens()">Exportar Tokens</button><button class="btn btn-outline" onclick="clearTokens()">Limpiar Tokens</button></div>
    </div>
  </div>
</div>

<!-- LAUNCHER UI (mini) -->
<div id="launcherUI" style="display:none;position:fixed;right:20px;bottom:20px;width:360px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(0,0,0,0.2));padding:12px;border-radius:12px;z-index:9998;box-shadow:0 12px 40px rgba(0,0,0,0.6)">
  <div class="d-flex justify-content-between align-items-center mb-2"><strong>Grimoire Rev - Launcher</strong><div><button class="btn btn-sm btn-outline" onclick="closeLauncherUI()"><i class="fas fa-times"></i></button></div></div>
  <div id="launcherApps" style="max-height:300px;overflow:auto"></div>
  <div class="mt-2 d-flex gap-2"><button class="btn btn-primary w-100" onclick="optimizarSistema()">Optimizar Ahora</button></div>
</div>

<!-- CONTACTO -->
<section id="contacto-info" class="py-5 text-center">
  <h2 class="section-title">Contacto Oficial</h2>
  <p class="small-muted mb-1">Consultas generales o soporte tÃ©cnico:</p>
  <p class="font-weight-bold">ðŸ“§ <a href="mailto:matias.taibo2023@gmail.com">matias.taibo2023@gmail.com</a></p>
  <p class="font-weight-bold">ðŸ“ž 3872252758 (solo emergencias o problemas no solucionables)</p>
</section>

<!-- FOOTER -->
<footer class="footer">
  <div class="container d-flex justify-content-between align-items-center">
    <div>Â© 2025 OptiM â€” v1 Beta â€” MatÃ­as Taibo</div>
    <div><a class="text-light me-2" href="#"><i class="fab fa-github"></i></a><a class="text-light" href="#"><i class="fab fa-twitter"></i></a></div>
  </div>
</footer>

<script>
/* ========== PWA service worker (inline demo) ========== */
if ('serviceWorker' in navigator) {
  const swCode = `self.addEventListener('install', e => { self.skipWaiting(); e.waitUntil(caches.open('optim-v1').then(c => c.addAll(['/','/index.html']))); }); self.addEventListener('fetch', e => { e.respondWith(caches.match(e.request).then(r => r || fetch(e.request))); });`;
  const blob = new Blob([swCode], {type: 'application/javascript'});
  const swUrl = URL.createObjectURL(blob);
  navigator.serviceWorker.register(swUrl).catch(()=>{});
}

/* ========== APP DATA & Storage KEYS ========== */
const APPS = [
  {id:'swf',name:'Descompresor de SWF',desc:'Extrae y optimiza archivos Flash',icon:'fa-file-archive'},
  {id:'optwin',name:'Optimizador y Organizador de Windows',desc:'Limpieza profunda, IA y turbo rendimiento',icon:'fa-cogs'},
  {id:'flashg',name:'Optimizador de Juegos Flash',desc:'Acelera juegos Flash',icon:'fa-gamepad'},
  {id:'aqw',name:'Optimizador de AQW',desc:'Mejora FPS y estabilidad',icon:'fa-dungeon'},
  {id:'organ',name:'Organizador de Archivos Moderno',desc:'ClasificaciÃ³n automÃ¡tica con IA',icon:'fa-folder-open'}
];
const TOKEN_KEY = 'optim_tokens';
const USERS_KEY = 'optim_users';
const PAYMENTS_KEY = 'optim_payments';
const ADMIN_PASS = 'admin-optim-2025'; // CAMBIAR en producciÃ³n

/* ========== RENDER PROGRAMS ========== */
function renderPrograms(filter=''){
  const cont = document.getElementById('programasContainer'); cont.innerHTML='';
  APPS.filter(a=>a.name.toLowerCase().includes(filter.toLowerCase())).forEach(a=>{
    const col = document.createElement('div'); col.className='col-md-6 col-lg-4';
    col.innerHTML = `<div class="card p-3 h-100 text-white"><i class="fas ${a.icon} fa-2x mb-2"></i><h5>${a.name}</h5><p class="small-muted">${a.desc}</p><div class="d-flex gap-2 mt-3"><button class='btn btn-primary' onclick="descargar('${a.id}')"><i class='fas fa-download'></i> Descargar</button><button class='btn btn-outline' onclick="abrirEnLauncher('${a.id}')">Abrir</button></div></div>`;
    cont.appendChild(col);
  });
}
renderPrograms();

/* ========== SEARCH ========== */
const searchInput = document.getElementById('searchInput');
searchInput.addEventListener('input', e=> renderPrograms(e.target.value));

/* ========== DOWNLOAD / LAUNCH ACTIONS (simulated) ========== */
function descargar(id){ alert('Simulado: Iniciando descarga del paquete: '+id+' (reemplaza URL en el HTML).'); }
function abrirEnLauncher(id){ openLauncherUI(); const l = document.getElementById('launcherApps'); const a = APPS.find(x=>x.id===id); const el = document.createElement('div'); el.className='p-2 mb-2'; el.innerHTML = `<strong>${a.name}</strong><div class='small-muted'>${a.desc}</div>`; l.prepend(el); }

/* ========== LAUNCHER UI ========== */
function openLauncherUI(){ document.getElementById('launcherUI').style.display='block'; }
function closeLauncherUI(){ document.getElementById('launcherUI').style.display='none'; }

/* ========== OPTIMIZAR (simulado) ========== */
function optimizarSistema(){ alert('Optimizando sistema... (simulaciÃ³n).'); }

/* ========== MEMBERSHIP / PAYMENTS FLOW (frontend-only) ========== */
function startPayment(method){ const msg = document.getElementById('paymentMsg'); msg.textContent = 'Instrucciones: seleccionaste '+method+". RealizÃ¡ el pago y luego subÃ­ el comprobante. Para PayPal/MercadoPago se mostrarÃ¡ un botÃ³n de pago real aquÃ­ en producciÃ³n."; window.scrollTo({top:document.getElementById('membresiaSection').offsetTop,behavior:'smooth'}); }

function uploadReceipt(){ const file = document.getElementById('receiptInput').files[0]; const msg = document.getElementById('paymentMsg'); if(!file){ msg.textContent='SubÃ­ primero el comprobante.'; return; }
  const reader = new FileReader(); reader.onload = ()=>{
    const payments = JSON.parse(localStorage.getItem(PAYMENTS_KEY) || '[]');
    const id = 'pay-'+Date.now();
    payments.push({id:id, name:file.name, data:reader.result, status:'pending', date:new Date().toISOString()});
    localStorage.setItem(PAYMENTS_KEY, JSON.stringify(payments));
    msg.textContent = 'Comprobante subido. El admin revisarÃ¡ y generarÃ¡ el token. ID pago: '+id;
    refreshPaymentsList();
  };
  reader.readAsDataURL(file);
}

function refreshPaymentsList(){ const payments = JSON.parse(localStorage.getItem(PAYMENTS_KEY) || '[]'); const el = document.getElementById('paymentsList'); if(!el) return; el.innerHTML=''; payments.forEach(p=>{ const d = document.createElement('div'); d.className='p-2 mb-1'; d.innerHTML = `<div class='d-flex justify-content-between align-items-center'><div><strong>${p.id}</strong><div class='small-muted'>${p.name} â€” ${p.status}</div></div><div><button class='btn btn-sm btn-outline' onclick='viewPayment("${p.id}")'>Ver</button></div></div>`; el.appendChild(d); }); }

function viewPayment(id){ const payments = JSON.parse(localStorage.getItem(PAYMENTS_KEY) || '[]'); const p = payments.find(x=>x.id===id); if(!p) return alert('No encontrado'); const w = window.open(); w.document.write(`<h3>Comprobante ${p.id}</h3><p>${p.name}</p><img src='${p.data}' style='max-width:90%;height:auto'/>`); }

/* ========== ADMIN PANEL LOGIC ========== */
function openAdminPanel(){ document.getElementById('adminPanel').style.display='flex'; }
function closeAdmin(){ document.getElementById('adminPanel').style.display='none'; document.getElementById('adminActions').style.display='none'; }
function loginAdmin(){ const pass = document.getElementById('adminPass').value; if(pass===ADMIN_PASS){ document.getElementById('adminActions').style.display='block'; loadTokensList(); loadUsersList(); refreshPaymentsList(); } else { alert('ContraseÃ±a admin incorrecta'); }}

function generarToken(){ const label = document.getElementById('newTokenInput').value.trim() || ('OPTIM-'+Math.random().toString(36).slice(2,10).toUpperCase()); const tokens = JSON.parse(localStorage.getItem(TOKEN_KEY) || '[]'); tokens.push(label); localStorage.setItem(TOKEN_KEY, JSON.stringify(tokens)); loadTokensList(); alert('Token generado: '+label); }

function loadTokensList(){ const tokens = JSON.parse(localStorage.getItem(TOKEN_KEY) || '[]'); document.getElementById('tokensList').textContent = tokens.join('
') || '(vacÃ­o)'; }

function exportTokens(){ const tokens = localStorage.getItem(TOKEN_KEY) || '[]'; const blob = new Blob([tokens], {type:'application/json'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = 'optim_tokens.json'; a.click(); URL.revokeObjectURL(url); }
function clearTokens(){ if(confirm('Borrar todos los tokens?')){ localStorage.removeItem(TOKEN_KEY); loadTokensList(); }}

/* ========== Users (assign tokens to users) ========== */
function loadUsersList(){ const users = JSON.parse(localStorage.getItem(USERS_KEY) || '[]'); const el = document.getElementById('usersList'); el.innerHTML=''; users.forEach(u=>{ const d = document.createElement('div'); d.className='p-2 mb-1'; d.innerHTML = `<div class='d-flex justify-content-between align-items-center'><div><strong>${u.name||u.email||u.token}</strong><div class='small-muted'>${u.email||''} â€¢ ${u.plan||'--'} â€¢ ${u.token}</div></div><div><button class='btn btn-sm btn-outline' onclick='revokeUser("${u.token}")'>Revocar</button><button class='btn btn-sm btn-primary ms-1' onclick='invoiceUser("${u.token}")'>Factura</button></div></div>`; el.appendChild(d); }); }

function addUserFromPayment(token,email,name,plan){ const users = JSON.parse(localStorage.getItem(USERS_KEY) || '[]'); users.push({token:token,email:email,name:name,plan:plan,created:new Date().toISOString()}); localStorage.setItem(USERS_KEY,JSON.stringify(users)); loadUsersList(); }

function revokeUser(token){ if(!confirm('Revocar acceso para '+token+'?')) return; let users = JSON.parse(localStorage.getItem(USERS_KEY) || '[]'); users = users.filter(u=>u.token!==token); localStorage.setItem(USERS_KEY,JSON.stringify(users)); loadUsersList(); alert('Revocado'); }

function exportUsers(){ const users = JSON.parse(localStorage.getItem(USERS_KEY) || '[]'); if(!users.length) return alert('No hay usuarios'); const csv = users.map(u=>`${u.token},${u.email||''},${u.name||''},${u.plan||''},${u.created||''}`).join('
'); const blob = new Blob([csv],{type:'text/csv'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href=url; a.download='optim_users.csv'; a.click(); URL.revokeObjectURL(url); }
function clearUsers(){ if(confirm('Borrar todos los usuarios?')){ localStorage.removeItem(USERS_KEY); loadUsersList(); }}

/* ========== Payments admin actions: accept payment and generate token for user ======== */
function acceptPaymentAndIssueToken(paymentId, email, name, plan){ const payments = JSON.parse(localStorage.getItem(PAYMENTS_KEY) || '[]'); const p = payments.find(x=>x.id===paymentId); if(!p) return alert('Pago no encontrado'); // change status
  p.status='accepted'; localStorage.setItem(PAYMENTS_KEY, JSON.stringify(payments)); refreshPaymentsList(); // generate token
  const token = 'OPTIM-'+Math.random().toString(36).slice(2,10).toUpperCase(); const tokens = JSON.parse(localStorage.getItem(TOKEN_KEY) || '[]'); tokens.push(token); localStorage.setItem(TOKEN_KEY, JSON.stringify(tokens)); // create user
  addUserFromPayment(token,email,name,plan);
  alert('Pago aceptado. Token emitido: '+token);
  loadTokensList(); }

/* Simple UI helper to accept a payment (for admin) via prompt */
function adminAcceptPrompt(){ const payments = JSON.parse(localStorage.getItem(PAYMENTS_KEY) || '[]'); if(!payments.length) return alert('No hay comprobantes pendientes'); const id = prompt('ID de pago a aceptar (ej: pay-...):'); if(!id) return; const email = prompt('Email del usuario:'); const name = prompt('Nombre (opcional):'); const plan = prompt('Plan (Plus/Elite):'); acceptPaymentAndIssueToken(id,email,name,plan); }

/* ========== Invoice generation (simple text/pdf download) ========== */
function invoiceUser(token){ const users = JSON.parse(localStorage.getItem(USERS_KEY) || '[]'); const u = users.find(x=>x.token===token); if(!u) return alert('Usuario no encontrado'); const invoice = `Factura OptiM
Fecha: ${new Date().toLocaleString()}
Cliente: ${u.name||u.email||'--'}
Token: ${u.token}
Plan: ${u.plan||'--'}
Emitida por: MatÃ­as Taibo (OptiM)`; const blob = new Blob([invoice], {type:'text/plain'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = `factura_${token}.txt`; a.click(); URL.revokeObjectURL(url); }

/* ========== Tokens validation for users */
function validarToken(){ const t = document.getElementById('premiumToken')?.value.trim(); const tokens = JSON.parse(localStorage.getItem(TOKEN_KEY) || '[]'); const msg = document.getElementById('tokenMsg'); if(!t){ if(msg) msg.textContent='IngresÃ¡ un token'; return; } if(tokens.includes(t)){ if(msg) msg.textContent='âœ” Token vÃ¡lido â€” Bienvenido premium'; if(document.getElementById('premiumContent')) document.getElementById('premiumContent').style.display='block'; localStorage.setItem('optim_access','premium'); } else { if(msg) msg.textContent='âœ– Token invÃ¡lido'; if(document.getElementById('premiumContent')) document.getElementById('premiumContent').style.display='none'; localStorage.removeItem('optim_access'); }}

/* ========== Helpers: export/clear payments/tokens ======== */
function loadInitialData(){ loadTokensList(); loadUsersList(); refreshPaymentsList(); }
function exportPayments(){ const payments = localStorage.getItem(PAYMENTS_KEY)||'[]'; const blob = new Blob([payments],{type:'application/json'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href=url; a.download='optim_payments.json'; a.click(); URL.revokeObjectURL(url); }

/* ========== Init & UI hooks ========== */
window.addEventListener('load', ()=>{ const l = document.getElementById('launcherApps'); APPS.forEach(a=>{ const el = document.createElement('div'); el.className='p-2 mb-1'; el.innerHTML = `<div class='d-flex justify-content-between align-items-center'><div><strong>${a.name}</strong><div class='small-muted'>${a.desc}</div></div><div><button class='btn btn-sm btn-primary' onclick="abrirEnLauncher('${a.id}')">Abrir</button></div></div>`; l.appendChild(el);} ); if(localStorage.getItem('optim_access')==='premium'){ document.getElementById('premiumContent').style.display='block'; } loadInitialData(); });

document.getElementById('openAdminBtn').addEventListener('click', openAdminPanel);
document.getElementById('openMemberBtn').addEventListener('click', ()=>{ document.getElementById('membresiaSection').scrollIntoView({behavior:'smooth'}); });
document.getElementById('ctaLauncher').addEventListener('click', openLauncherUI);
document.getElementById('ctaExplore').addEventListener('click', ()=>{ document.getElementById('programas').scrollIntoView({behavior:'smooth'}); });

// quick admin accept helper binding
window.adminAcceptPrompt = adminAcceptPrompt;
</script>
</body>
</html>






